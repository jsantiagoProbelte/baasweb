
{% extends "baaswebapp/layout.html" %}

{% load crispy_forms_tags %}

{% block content %}

{% if errors %}
<div class="alert alert-primary" role="alert">{{errors}}</div>
{% endif %}

{% include "trialapp/header_page_trial.html" with title=title subtitle='' subheader=fieldTrial.name item=thesis %}

<div class="col-md-6 offset-md-3">
    <div class="row mb-2">
        <div class="col-md-4">
            <form id="select-product" action="{% url 'treatment_thesis-add' thesis.id %}" method="GET">
                {% csrf_token %}
                {{ form|crispy }}
                <label for="input-select-product-new" class="mt-3 mb-2">Choose Product:</label>
                {% include 'baaswebapp/input_select_template.html' with tag='product' item_id='new' currentValue=productId selectOptions=products addNull=False showAsList=True %}
            </form>
        </div>
        <div class="col-md-8">
            <form id="select-treatment" action="{% url 'treatment_thesis-add' thesis.id %}" method="GET">
                {% csrf_token %}
                {{ form|crispy }}
                <label for="input-select-treatment-new" class="mt-3 mb-2">Choose Treatment:</label>
                {% include 'baaswebapp/input_select_template.html' with tag='treatment' item_id='new' currentValue=currentTreatment selectOptions=treatments addNull=False showAsList=True%}
                <div class="text-sm-end">
                    <input type="submit" name="submit" value="Select" class="mt-4 btn btn-primary btn btn-info text-right">
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
{% block scripts %}
<script>
$('#input-select-product-new').on('change', function() {
    var element=$(this);
    var formElement=element.parent();
    formElement.submit();
});
</script> 
{% endblock %}  