{% extends "baaswebapp/layout.html" %}

{% load crispy_forms_tags %}

{% block content %}

{% include "trialapp/header_page_trial.html" with title=titleView subtitle='field trial' edit_href="fieldtrial-update" item=fieldTrial delete_url='fieldtrial-delete'%}

<div class="row">
  <div class="col-md-2">
    {% include "trialapp/card_values.html" with title='Goal' dataItems=dataTrial.Goal classColumn='classColumn1'%}
    {% include "trialapp/card_values.html" with title='Status' dataItems=dataTrial.Status classColumn='classColumn1'%}
  </div>
  <div class="col-md-3">
    {% include "trialapp/card_values.html" with title='Cultive' dataItems=dataTrial.Cultive classColumn='classColumn2'%}
    {% if fieldTrial.latitude %}
      <div id="map" class='mt-3 mb-3' width="100%" style='height:250px'></div><div id="show_marker"></div>
    {% else %}
      <small> You can now define the latitude and longitude of this trial. Please add it</small>
    {% endif %}
    {% include "trialapp/card_values.html" with title='Location' dataItems=dataTrial.Location link='assessment-list' classColumn='classColumn2'%}
  </div>
  <div class="col-md-3">
    {% include "trialapp/card_values.html" with title='Assessments & Data' dataItems=dataTrial.Assessments link='trial_data' classColumn='classColumn2'%}
    {% include "trialapp/card_values.html" with title='Applications' dataItems=dataTrial.Applications link='application-list' classColumn='classColumn2'%}
  </div>
  <div class="col-md-4">
    
    <div class="card no-border mb-3" >
      <div class="card-header-baas h4">
        <a class="btn btn-secondary btn-sm fs-5" href="{% url 'thesis-list' fieldTrial.id%}">
          Thesis<span class='badge bg-light ms-2'>{{numberThesis}}</span></a>
      </div>
      
      <div class="card-body-baas">
        {% include 'trialapp/thesis_list_table.html' with show_description=False %}
      </div>
    </div>
    {% include "trialapp/card_values.html" with title='Layout' dataItems=dataTrial.Layout classColumn='classColumn3'%}
    {% include 'trialapp/thesis_map.html' %}
  </div>

</div>
{% endblock %}
{% block scripts %}
<script>
    var latitude={{fieldTrial.latitude}};
    var longitude={{fieldTrial.longitude}};
    // Create a default Marker and add it to the map.

</script>
<script src="https://api.mapbox.com/mapbox-gl-js/v2.13.0/mapbox-gl.js"></script>
<script src='/static/baaswebapp/scripts/mapbaas.js'></script>
{% endblock %}  